{% extends "layout.html" %}

{% block content %}
<div class="container">
    <h1 class="text-center my-4" style="color: #333333;">Gestionar Citas</h1>
    <form method="POST" action="/add_cita">
        <div class="form-group">
            <label for="id_cliente">Cliente</label>
            <select class="form-control" id="id_cliente" name="id_cliente" required>
                {% for cliente in clientes %}
                <option value="{{ cliente[0] }}">{{ cliente[1] }}</option>
                {% endfor %}
            </select>
        </div>
        <div class="form-group">
            <label for="fecha_programada">Fecha y Hora Programada</label>
            <input type="datetime-local" class="form-control" id="fecha_programada" name="fecha_programada" required>
        </div>
        <div class="form-group">
            <label for="servicio">Servicio</label>
            <input type="text" class="form-control" id="servicio" name="servicio" required>
        </div>
        <div class="form-group">
            <label for="estado">Estado</label>
            <select class="form-control" id="estado" name="estado" required>
                <option value="Programada">Programada</option>
                <option value="Realizada">Realizada</option>
                <option value="Cancelada">Cancelada</option>
            </select>
        </div>
        <div class="form-group">
            <label for="observaciones">Observaciones</label>
            <textarea class="form-control" id="observaciones" name="observaciones" rows="4"></textarea>
        </div>
        <button type="submit" class="btn btn-primary mt-3">Agregar Cita</button>
    </form>

    <h2 class="mt-5">Lista de Citas</h2>
    <table class="table table-bordered mt-3">
        <thead>
            <tr>
                <th>ID</th>
                <th>Cliente</th>
                <th>Fecha y Hora</th>
                <th>Servicio</th>
                <th>Estado</th>
                <th>Observaciones</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
            {% for cita in citas %}
            <tr>
                <td>{{ cita[0] }}</td>
                <td>{{ cita[6] }} {{ cita[7] }}</td>
                <td>{{ cita[2] }}</td>
                <td>{{ cita[3] }}</td>
                <td>{{ cita[4] }}</td>
                <td>{{ cita[5] }}</td>
                <td>
                    <a href="/edit_cita/{{ cita[0] }}" class="btn btn-primary btn-sm">Editar</a>
                    <a href="/delete_cita/{{ cita[0] }}" class="btn btn-danger btn-sm btn-delete">Eliminar</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}